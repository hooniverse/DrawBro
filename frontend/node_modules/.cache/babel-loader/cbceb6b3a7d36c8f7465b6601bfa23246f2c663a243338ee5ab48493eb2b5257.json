{"ast":null,"code":"var _jsxFileName = \"/Users/hooniverse/Desktop/draw/frontend/src/gu/Upload.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Upload = () => {\n  _s();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [previewUrl, setPreviewUrl] = useState(null);\n  const [uploadStatus, setUploadStatus] = useState('');\n  const [aiImageUrl, setAiImageUrl] = useState('');\n  const [loading, setLoading] = useState(false);\n  const handleFileChange = event => {\n    const file = event.target.files[0];\n    setSelectedFile(file);\n\n    // 이미지 미리보기 URL 생성\n    const fileUrl = URL.createObjectURL(file);\n    setPreviewUrl(fileUrl);\n  };\n  const handleUpload = async () => {\n    if (!selectedFile) {\n      alert(\"사진을 선택하세요!\");\n      return;\n    }\n    setLoading(true);\n    const formData = new FormData();\n    formData.append('image', selectedFile);\n    try {\n      const response = await fetch('/upload', {\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error('업로드 실패!!');\n      }\n      const data = await response.json();\n      setUploadStatus(`업로드 성공! 경로: ${data.path}`);\n      setAiImageUrl(data.ai_result); // AI 결과로 반환된 이미지 URL 설정\n      setLoading(false);\n    } catch (error) {\n      console.error('에러:', error);\n      setUploadStatus('업로드 실패');\n      setLoading(false);\n    }\n  };\n  const handleDownload = () => {\n    const link = document.createElement('a');\n    link.href = aiImageUrl;\n    link.download = 'ai_image.jpg';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  const handleReplay = () => {\n    // 상태 초기화\n    setSelectedFile(null);\n    setPreviewUrl(null);\n    setUploadStatus('');\n    setAiImageUrl('');\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"lang\",\n      children: \"\\uC0AC\\uC9C4 \\uC120\\uD0DD \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onChange: handleFileChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      children: \"\\uC5C5\\uB85C\\uB4DC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), previewUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uC120\\uD0DD \\uC0AC\\uC9C4:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: previewUrl,\n        alt: \"Preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: uploadStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }, this), aiImageUrl && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"result-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uACB0\\uACFC\\uBB3C:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: aiImageUrl,\n          alt: \"AI Processed\",\n          className: \"result-image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button-container\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleDownload,\n            className: \"download-button\",\n            children: \"\\uC774\\uBBF8\\uC9C0 \\uC800\\uC7A5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n};\n_s(Upload, \"tlK6uXeyijrBqedk7p5Cd5dmdO4=\");\n_c = Upload;\nexport default Upload;\nvar _c;\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","Upload","_s","selectedFile","setSelectedFile","previewUrl","setPreviewUrl","uploadStatus","setUploadStatus","aiImageUrl","setAiImageUrl","loading","setLoading","handleFileChange","event","file","target","files","fileUrl","URL","createObjectURL","handleUpload","alert","formData","FormData","append","response","fetch","method","body","ok","Error","data","json","path","ai_result","error","console","handleDownload","link","document","createElement","href","download","appendChild","click","removeChild","handleReplay","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","onClick","className","src","alt","_c","$RefreshReg$"],"sources":["/Users/hooniverse/Desktop/draw/frontend/src/gu/Upload.js"],"sourcesContent":["import React, { useState } from 'react';\n\nconst Upload = () => {\n    const [selectedFile, setSelectedFile] = useState(null);\n    const [previewUrl, setPreviewUrl] = useState(null);\n    const [uploadStatus, setUploadStatus] = useState('');\n    const [aiImageUrl, setAiImageUrl] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    const handleFileChange = (event) => {\n        const file = event.target.files[0];\n        setSelectedFile(file);\n\n        // 이미지 미리보기 URL 생성\n        const fileUrl = URL.createObjectURL(file);\n        setPreviewUrl(fileUrl);\n    };\n\n    const handleUpload = async () => {\n        if (!selectedFile) {\n            alert(\"사진을 선택하세요!\");\n            return;\n        }\n        setLoading(true);\n        const formData = new FormData();\n        formData.append('image', selectedFile);\n\n        try {\n            const response = await fetch('/upload', {\n                method: 'POST',\n                body: formData\n            });\n\n            if (!response.ok) {\n                throw new Error('업로드 실패!!');\n            }\n\n            const data = await response.json();\n            setUploadStatus(`업로드 성공! 경로: ${data.path}`);\n            setAiImageUrl(data.ai_result);  // AI 결과로 반환된 이미지 URL 설정\n            setLoading(false);\n\n        } catch (error) {\n            console.error('에러:', error);\n            setUploadStatus('업로드 실패');\n            setLoading(false);\n        }\n    };\n\n    const handleDownload = () => {\n        const link = document.createElement('a');\n        link.href = aiImageUrl;\n        link.download = 'ai_image.jpg';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n    };\n\n    const handleReplay = () => {\n        // 상태 초기화\n        setSelectedFile(null);\n        setPreviewUrl(null);\n        setUploadStatus('');\n        setAiImageUrl('');\n        setLoading(false);\n    };\n\n    return (\n        <div>\n            <label htmlFor=\"lang\">사진 선택 </label>\n            <input type=\"file\" onChange={handleFileChange} />\n            <button onClick={handleUpload}>업로드</button>\n            \n            {previewUrl && (\n                <div className=\"image-container\">\n                    <h3>선택 사진:</h3>\n                    <img src={previewUrl} alt=\"Preview\" />\n                </div>\n            )}\n            \n            <p>{uploadStatus}</p>\n            \n            {loading && (\n                <div className=\"loading-overlay\">\n                    <div className=\"spinner\"></div>\n                </div>\n            )}\n            \n            {aiImageUrl && !loading && (\n                <div className=\"result-overlay\">\n                    <div className=\"image-container\">\n                        <h3>결과물:</h3>\n                        <img src={aiImageUrl} alt=\"AI Processed\" className=\"result-image\" />\n                        <div className=\"button-container\">\n                            <button onClick={handleDownload} className=\"download-button\">이미지 저장</button>\n                            \n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default Upload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}